user  nginx;
worker_processes  1;

error_log  /var/log/nginx/error.log warn;
pid        /var/run/nginx.pid;

events {
  worker_connections  4096;  ## Default: 1024
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    keepalive_timeout  65;

    #gzip  on;

    #custom code bellow
    server {
      listen       80;
      listen       443 ssl;
      server_name  _;

      # location / {
      #   root   /usr/share/nginx/html;
      #   index  index.html index.htm;
      # }
  
      location ~* /docs/deploy/instant-deployment(.*) {
        return 301 https://wedeploy.com/docs/auth/getting-started/;
      }
      
      location ~* /blog/http2-support-for-all-wedeploy-applications/wedeploy.com {
        return 301 https://wedeploy.com/blog/http2-support-for-all-wedeploy-applications/;
      }

      location ~* /docs/auth/getting-started.html {
        return 301 https://wedeploy.com/docs/auth/getting-started/;
      }
      
      location ~* /blog/using-wedeploy-with-react-native-and-react-vr.html {
        return 301 https://wedeploy.com/blog/using-wedeploy-with-react-native-and-react-vr/;
      }

      location ~* /docs/auth/environment-variables.html {
        return 301 https://wedeploy.com/docs/auth/environment-variables/;
      }

      location ~* /blog/announcing-new-sdks-for-mobile-development.html {
        return 301 https://wedeploy.com/blog/announcing-new-sdks-for-mobile-development/;
      }

      location ~* /docs/auth/sign-in-with-facebook.html {
        return 301 https://wedeploy.com/docs/auth/sign-in-with-facebook/;
      }

      location ~* /docs/other/java(.*) {
        return 301 https://wedeploy.com/docs/deploy/deploying-java/;
      }

      location ~* /docs/intro/environment-variables.html {
        return 301 https://wedeploy.com/docs/intro/environment-variables/;
      }

      location ~* /docs/email/environment-variables.html {
        return 301 https://wedeploy.com/docs/email/environment-variables/;
      }

      location ~* /docs/auth/sign-in-with-github.html {
        return 301 https://wedeploy.com/docs/auth/sign-in-with-github/;
      }

      location ~* /tutorials/liferay-dxp/get-started.html {
        return 301 https://wedeploy.com/tutorials/liferay-dxp/get-started/;
      }

      location ~* /docs/data/getting-started.html {
        return 301 https://wedeploy.com/docs/data/getting-started/;
      }

      location ~* /docs/intro/using-the-command-line.html {
        return 301 https://wedeploy.com/docs/intro/using-the-command-line/;
      }

      location ~* /docs/other/ruby(.*) {
        return 301 https://wedeploy.com/docs/deploy/deploying-ruby/;
      }

      location ~* /docs/hosting/custom-error-pages.html {
        return 301 https://wedeploy.com/docs/hosting/custom-error-pages/;
      }

      location ~* /docs/intro/feature-overview.html {
        return 301 https://wedeploy.com/docs/intro/feature-overview/;
      }

      location ~* /blog/the-first-wedeploy-hack-day-in-madrid.html {
        return 301 https://wedeploy.com/blog/the-first-wedeploy-hack-day-in-madrid/;
      }

      location ~* /docs/hosting/environment-variables.html {
        return 301 https://wedeploy.com/docs/hosting/environment-variables/;
      }

      location ~* /tutorials/nodejs/you-made-it.html {
        return 301 https://wedeploy.com/tutorials/nodejs/you-made-it/;
      }

      location ~* /docs/email/sending-email.html {
        return 301 https://wedeploy.com/docs/email/sending-email/;
      }

      location ~* /tutorials/java/deploy-project.html {
        return 301 https://wedeploy.com/tutorials/java/deploy-project/;
      }

      location ~* /docs/data/configuring-data.html {
        return 301 https://wedeploy.com/docs/data/configuring-data/;
      }

      location ~* /tutorials/auth-web/add-api-methods.html {
        return 301 https://wedeploy.com/tutorials/auth-web/add-api-methods/;
      }

      location ~* /tutorials/email-web/add-api-method.html {
        return 301 https://wedeploy.com/tutorials/email-web/add-api-method/;
      }

      location ~* /docs/email/getting-started.html {
        return 301 https://wedeploy.com/docs/email/getting-started/;
      }

      location ~* /tutorials/data-web/add-config-files.html {
        return 301 https://wedeploy.com/tutorials/data-web/add-config-files/;
      }

      location ~* /tutorials/data-web/add-api-methods.html {
        return 301 https://wedeploy.com/tutorials/data-web/add-api-methods/;
      }

      location ~* /tutorials/auth-android/clone-sample-repo.html {
        return 301 https://wedeploy.com/tutorials/auth-android/download-sample/;
      }

      location ~* /docs/data/real-time-feeds(.*) {
        return 301 https://wedeploy.com/docs/data/real-time-data/;
      }

      location ~* /blog/starting-an-iot-platform-with-wedeploy.html {
        return 301 https://wedeploy.com/blog/starting-an-iot-platform-with-wedeploy/;
      }

      location ~* /tutorials/liferay/get-started.html {
        return 301 https://wedeploy.com/tutorials/liferay-dxp/get-started/;
      }

      location ~* /blog/liferay-hack-day.html {
        return 301 https://wedeploy.com/blog/liferay-hack-day/;
      }

      location ~* /docs/data/retrieving-data/ {
        return 301 https://wedeploy.com/docs/data/getting-data/;
      }

      location ~* /blog/wedeploy-beta-our-biggest-release-yet.html {
        return 301 https://wedeploy.com/blog/wedeploy-beta-our-biggest-release-yet/;
      }

      location ~* /docs/intro/custom-domains.html {
        return 301 https://wedeploy.com/docs/intro/custom-domains/;
      }

      location ~* /docs/other(.*) {
        return 301 https://wedeploy.com/docs/deploy/getting-started;
      }

      location ~* /blog/happy-new-year-from-wedeploy.html {
        return 301 https://wedeploy.com/blog/happy-new-year-from-wedeploy/;
      }

      location ~* /docs/other/liferay.html {
        return 301 https://wedeploy.com/docs/deploy/deploying-liferay-dxp/;
      }

      location ~* /tutorials/ruby/download-sample.html {
        return 301 https://wedeploy.com/tutorials/ruby/download-sample/;
      }

      location ~* /tutorials/email-android/you-made-it.html {
        return 301 https://wedeploy.com/tutorials/email-android/you-made-it/;
      }

      location ~* /docs/data/js/real-time-feeds.html {
        return 301 https://wedeploy.com/docs/data/real-time-data/;
      }

      location ~* /tutorials/lsna(.*) {
        return 301 https://wedeploy.com/tutorials/;
      }

      location ~* /docs/deploy/migrating-to-beta.html {
        return 301 https://wedeploy.com/docs/;
      }

      location ~* /tutorials/email-android/it-works.html {
        return 301 https://wedeploy.com/tutorials/email-android/it-works/;
      }

      location ~* /docs/intro/using-the-api-client.html {
        return 301 https://wedeploy.com/docs/intro/api-clients/;
      }

      location ~* /docs/email/rest/ {
        return 301 https://wedeploy.com/docs/email;
      }

      location ~* /docs/auth/js/sign-in-with-facebook.html {
        return 301 https://wedeploy.com/docs/auth/sign-in-with-facebook/;
      }

      location ~* /blog/environment-variables-new-java-service-and-multiple-custom-domains.htmll {
        return 301 https://wedeploy.com/blog/environment-variables-new-java-service-and-multiple-custom-domains/;
      }

      location ~* /blog/uptime-status-new-ruby-service-and-more.html {
        return 301 https://wedeploy.com/blog/uptime-status-new-ruby-service-and-more/;
      }

      location ~* /docs/auth/js/sign-in-with-google.html {
        return 301 https://wedeploy.com/docs/auth/sign-in-with-google/;
      }

      location ~* /blog/my-first-three-months-with-wedeploy.html {
        return 301 https://wedeploy.com/blog/my-first-three-months-with-wedeploy/;
      }

      location ~* /docs/intro/using-the-dashboard.html {
        return 301 https://wedeploy.com/docs/intro/using-the-console/;
      }

      location ~* /tutorials/email-web/deploy-the-project.html {
        return 301 https://wedeploy.com/tutorials/email-web/deploy-project/;
      }

      location ~* /docs/data/java(.*) {
        return 301 https://wedeploy.com/docs/data/getting-started/;
      }

      location ~* /tutorials/java/deploy-your-app.html {
        return 301 https://wedeploy.com/tutorials/java/deploy-project/;
      }

      location ~* /tutorials/hosting/add-container-json.html {
        return 301 https://wedeploy.com/tutorials/hosting/add-config-file/;
      }

      location ~* /blog/3-reasons-why-you-should-use-environment-variables.html {
        return 301 https://wedeploy.com/blog/3-reasons-why-you-should-use-environment-variables/;
      }

      location ~* /tutorials/ruby/make-a-change.html {
        return 301 https://wedeploy.com/tutorials/java/download-sample/;
      }

      location ~* /docs/auth/environment-variables.html {
        proxy_pass http://localhost:8888; 
      }

      location / {
        proxy_pass http://node:3001;
        proxy_redirect     off;
        proxy_set_header   Host $host;
        proxy_set_header   X-Real-IP $remote_addr;
        proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header   X-Forwarded-Host $server_name;
      }

    }

    include /etc/nginx/conf.d/*.conf;
}